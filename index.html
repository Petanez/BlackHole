<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script defer src="SpaceState.js"></script>
    <script defer src="Animation.js"></script>
    <script defer src="App.js"></script>
    <style>
        .space-container {
            width: 500px;
            height: 400px;
            border: 1px solid black;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }



    </style>
</head>
<body>
    <div class="space-container">

    </div>
    <!-- <script>

        // var Animation = function(spaceState) {
        //     this.spaceEl = document.querySelector(".space-container")            
        //     this.blackHole = spaceState.blackHole
        //     this.blackHoleEl = document.createElement("div")
        //     this.blackHoleEl.style = `background: black; border-radius: 99999px; width: ${this.blackHole.d}px; height: ${this.blackHole.d}px;
        //                               position: relative; top: ${this.blackHole.pos.y - this.blackHole.d / 2}px; left: ${this.blackHole.pos.x - this.blackHole.d / 2}px;`
        //     this.spaceEl.appendChild(this.blackHoleEl)

        //     this.objectEls = spaceState.objects
        //     console.log(this.objectEls)

        //     schedule()
            
        //     function schedule() {
        //         if (objects.length != 0) 
        //             tick()
        //         else 
        //             console.log("Done")
        //     }
        
        //     function tick() {
            //         this.timeOut = setTimeout(() => {
        //             console.log(this.objectEls)
        //             this.objectEls.pop()
        //             schedule()
        //         }, 1000)
        //     }
        // }
        
        
        class Animation {
            constructor(spaceState) {
                this.spaceEl = document.querySelector(".space-container")       
                this.spaceState = spaceState     
                this.blackHole = this.spaceState.blackHole
                this.blackHoleEl = document.createElement("div")
                this.blackHoleEl.style = `background: black; border-radius: 99999px; width: ${this.blackHole.d}px; height: ${this.blackHole.d}px;
                                          position: relative; top: ${this.blackHole.pos.y - this.blackHole.d / 2}px; left: ${this.blackHole.pos.x - this.blackHole.d / 2}px;`
                this.spaceEl.appendChild(this.blackHoleEl)
                this.objectEls = []
                this.turn = 0

                this.createObjects()
                this.schedule()
            }
                
            schedule() {
                if (this.turn < 5) 
                    this.tick()
                else 
                    console.log("Done")
            }
                
            createObjects() {
                for (let obj of this.spaceState.objects) {
                    let objEl = document.createElement("div")
                    objEl.style = `position: absolute; top: ${obj.pos.y}px; left: ${obj.pos.x}px; width: ${obj.d}px; height: ${obj.d}px; background: black; transition: 1s linear;`
                    this.objectEls.push(this.spaceEl.appendChild(objEl))
                }
            }

            updateObjects() {
                for (let obj of this.objectEls) {
                    let newX = obj.style.left.slice(0,-2) - 20
                    let newY = obj.style.top.slice(0,-2) - 20
                    obj.style.left = newX + "px"
                    obj.style.top = newY + "px"
                }
            }

            tick() {
                this.timeOut = setTimeout(() => {
                    this.spaceState = this.spaceState.update(this.spaceState.objects)
                    
                    this.updateObjects()
                    this.schedule()
                    this.turn++
                }, 1000)
            }
        }

        let spaceState = new SpaceState({d: 50, pos: {x:250, y:200}}, [{d: 10, pos: {x:50, y:200}}, {d: 5, pos: {x:300, y:300}}])
        let animation = new Animation(spaceState)
    </script> -->
</body>
</html>